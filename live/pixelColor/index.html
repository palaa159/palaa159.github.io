<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <title>Color Wheel Demo</title>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min.js"></script>
	<script src="//code.jquery.com/jquery-2.1.0.min.js" type="text/javascript"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.2/raphael-min.js" type="text/javascript"></script>
  <script src="./colorwheel.js" type="text/javascript"></script>

  <style type="text/css" media="screen">


  </style>
</head>

<body>
      <div id="callback_example" class="example">
      <div >
        <div style="float:left; width:100%; margin-bottom:20px">
          <div class="colorwheel" style="float:left; margin-right:20px; width:300px; text-align:left;"></div>
          <div style="float:left; width:50%">
            <span class="onchange" style="padding:5px; color:#FFF"></span>
            <div class="ondrag" style="display:none;"></div>
          </div>
        </div>
      </div>
    </div>


<script>
  $(document).ready(function(){
    var socket = io.connect('http://54.173.213.159:3080');
    var colors = [];
    function set_source(f, target){
        f();
        target.text(f.toString())
      }

    function callback_example(){
    var cw = Raphael.colorwheel($("#callback_example .colorwheel")[0],300, 360),
        onchange_el = $("#callback_example .onchange"),
        ondrag_el = $("#callback_example .ondrag");
        cw.color("#F00");

    function start(){ondrag_el.show()}
    function stop(){
      ondrag_el.hide()
      socket.emit('color change', colors);
    }

  cw.ondrag(start, stop);
  cw.onchange(function(color) {
      colors = [parseInt(color.r), parseInt(color.g), parseInt(color.b)]
      // onchange_el.css("background", color.hex).text("RGB:"+colors.join(", "))
    });
  }

    set_source(callback_example, $("#callback_example .source"));
  });
</script>

</body>
</html>
