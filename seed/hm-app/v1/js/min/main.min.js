var app=app||{};app.main=function(){var n,e,t,a=[],o=[],l=function(){var n="data/inventory.csv";queue().defer(d3.csv,n).await(function(n,e){a=e,i()})},i=function(){console.log("finished loading data"),n="Any",e="Any",t="Any",c()},c=function(){$("#sel_freq_update").off("change").on("change",function(){n=$(this).val()}),$("#sel_used_by").off("change").on("change",function(){e=$(this).val()}),$("#sel_linked_to").off("change").on("change",function(){t=$(this).val()}),$("#btn_submit").off("click").on("click",function(){console.log("empty output"),o=[],console.log("filter#1: "+n),console.log("filter#2: "+e),console.log("filter#3: "+t);var l=[],i=[],c=[];_.each(a,function(a){"Any"!==n&&a[$("#field_freq_updated").text()]===n?l.push(a):"Any"===n&&l.push(a),"Any"!==e&&a["Used By Department 1"]===e||a["Used By Department 2"]===e||a["Used By Department 3"]===e||a["Used By Department 4"]===e?i.push(a):"Any"===e&&i.push(a),"Any"!==t&&a["Linkable Data 1"]===t||a["Linkable Data 2"]===t||a["Linkable Data 3"]===t?c.push(a):"Any"===t&&c.push(a)}),o=_.intersection(l,i,c),console.log(o);var s=$("#tpl-result").html(),u=_.template(s,{array:o});$("#result_container").html(u)})};return{init:i,load:l}}(),app.main.load();